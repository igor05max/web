{% extends "base.html" %}

{% block content %}

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{url_for('static', filename='css/style.css')}"/>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
</head>

<h2 align="center"> {{ name }} </h2>
<div>
    <a class="btn btn-primary " href="/" style="position:absolute;left:1109px;top:97px;z-index:1;">Главная страница</a>

    <div align="center" id="carousel-example-generic" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            {% for item in location_list %}
            {% if loop.index == 1 %}
            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
            {% else %}
            <li data-target="#carousel-example-generic" data-slide-to="{{ loop.index - 1 }}"></li>
            {% endif %}
            {% endfor %}
        </ol>
        <div class="carousel-inner" role="listbox">
            {% for item in location_list %}
            {% if loop.index == 1 %}
            <div class="carousel-item active">
                <img src="{{ url_for('static', filename=item) }}" width="300" height="300">
            </div>
            {% else %}
            <div class="carousel-item">
                <img src="{{ url_for('static', filename=item) }}" width="300" height="300">
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    <a class="left carousel-control" href="#carousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    </br>
</div>
</div>
<img src="{{url_for('static', filename=location.user.name_image)}}" width="50" height="50"
>

<a href="/profile_/{{location.user.id}}">{{creator}}</a>
<div class="form-group" align="center">
    {% if location.about != "" %}
    <textarea class="form-control" id="about" rows="4" cols="8" disabled="disabled" name="about"
    >{{location.about}}</textarea>{% endif %}
</div>
<h7>Просмотров: {{location.count_visits}}</h7>
<h5> Категория: {{location.category}} </h5>
<br>
<br>
<br>
<br>
<hr id="Line1" style="top:273px;width:544px;z-index:5;">
{% if current_user.is_authenticated %}

{% if current_user.id == location.creator %}

<a class="btn btn-primary " href="/editing_locations/{{location.id}}"
   style="position:absolute;top:28px;height:40px;left:242px;bottom:0;">Редактировать</a>

{% endif %}
<div class="form-group">

    <form method="post" enctype="multipart/form-data">
        <textarea class="form-control" id="about2" rows="4" cols="8" name="comment" placeholder="Комментарий..."
        ></textarea>
        <button type="submit" class="btn btn-primary">Отправить комментарий</button>
    </form>
</div>

{% endif %}

{% for elem in comment_list %}

<table style="text-align:width: 700px;" border="0"
       cellpadding="2" cellspacing="2">

    <tbody>
    <tr>
        <td style="vertical-align: top;width:200px"><img src="{{url_for('static', filename=elem.user.name_image)}}"
                                                         width="50" height="50"
        >

            <br><a href="/profile_/{{elem.user.id}}">{{ elem.user.name }}</a><br>
            {{ elem.modified_date }}
        </td>
        {% if elem.user.id == 1 %}
        <td style="vertical-align: top; width: 500px">
            <div class="form-group" align="center">
       <textarea class="form-control" rows="4" cols="8" disabled="disabled" name="about"
                 style="background-color: rgb(155, 254, 205);"
       >{{elem.comment}}</textarea>
            </div>
            {% if elem.remote != True and current_user.id == 1%}
            <a href="/delete_a_comment/{{elem.id}}/{{current_user.id}}" class="btn btn-danger">
                Удалить
            </a> <a href="/edit_a_comment/{{elem.id}}" class="btn btn-warning">
                Редактировать
            </a>{% endif %}
            {% else %}

        <td style="vertical-align: top; width: 500px">
            <div class="form-group" align="center">
                {% if elem.edit != None %}
                <textarea class="form-control" rows="4" cols="8" disabled="disabled"
                >{{elem.comment}}  {{elem.edit}}</textarea>
                {% else %}
                <textarea class="form-control" rows="4" cols="8" disabled="disabled" name="about"
                >{{elem.comment}}</textarea>
                {% endif %}
            </div>
            {% if current_user.is_authenticated %} {% if elem.user.id == current_user.id and elem.remote != True %}
            <a href="/edit_a_comment/{{elem.id}}" class="btn btn-warning">
                Редактировать
            </a>{% endif %}
            {% if (elem.user.id == current_user.id or current_user.id == 1) and elem.remote != True %}
            <a href="/delete_a_comment/{{elem.id}}/{{current_user.id}}" class="btn btn-danger">
                Удалить
            </a>
            {% endif %}{% endif %}
            {% endif %}<br>
        </td>
    </tr>
    </tbody>

</table>
<br>
<br>
<hr style="top:273px;width:544px;z-index:5;">


{% endfor %}
{% if current_user.is_authenticated %}<a class="{{color}}" href="/chat/{{current_user.id}}"
           style="position:absolute;left:1289px;top:637px;z-index:1;position:fixed;">Чат</a>{% endif %}


{% if current_user.is_authenticated %}
{% if current_user.id == 1 or current_user.id == location.creator %}
    <a href="/del_location/{{location.id}}" class="btn btn-danger">
                    Удалить локацию
                </a>{%endif%}
{% endif %}

{% endblock %}
